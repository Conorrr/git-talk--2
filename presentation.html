<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"><title>Understanding Git</title><meta name="author" content="Conor Restall"><link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css"><link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css"><link rel="stylesheet" href="node_modules/reveal.js/dist/theme/solarized.css" id="theme"><!--This CSS is generated by the Asciidoctor reveal.js converter to further integrate AsciiDoc's existing semantic with reveal.js--><style type="text/css">.reveal div.right {
  float: right
}

/* source blocks */
.reveal .listingblock.stretch > .content {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre > code {
  height: 100%;
  max-height: 100%
}

/* auto-animate feature */
/* hide the scrollbar when auto-animating source blocks */
.reveal pre[data-auto-animate-target] {
  overflow: hidden;
}

.reveal pre[data-auto-animate-target] code {
  overflow: hidden;
}

/* add a min width to avoid horizontal shift on line numbers */
code.hljs .hljs-ln-line.hljs-ln-n {
  min-width: 1.25em;
}

/* tables */
table {
  border-collapse: collapse;
  border-spacing: 0
}

table {
  margin-bottom: 1.25em;
  border: solid 1px #dedede
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
  padding: .5em .625em .625em;
  font-size: inherit;
  text-align: left
}

table tr th, table tr td {
  padding: .5625em .625em;
  font-size: inherit
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
  display: table-cell;
  line-height: 1.6
}

td.tableblock > .content {
  margin-bottom: 1.25em
}

td.tableblock > .content > :last-child {
  margin-bottom: -1.25em
}

table.tableblock, th.tableblock, td.tableblock {
  border: 0 solid #dedede
}

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock {
  border-width: 0 1px 1px 0
}

table.grid-all > tfoot > tr > .tableblock {
  border-width: 1px 1px 0 0
}

table.grid-cols > * > tr > .tableblock {
  border-width: 0 1px 0 0
}

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock {
  border-width: 0 0 1px
}

table.grid-rows > tfoot > tr > .tableblock {
  border-width: 1px 0 0
}

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child {
  border-right-width: 0
}

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock {
  border-bottom-width: 0
}

table.frame-all {
  border-width: 1px
}

table.frame-sides {
  border-width: 0 1px
}

table.frame-topbot, table.frame-ends {
  border-width: 1px 0
}

.reveal table th.halign-left, .reveal table td.halign-left {
  text-align: left
}

.reveal table th.halign-right, .reveal table td.halign-right {
  text-align: right
}

.reveal table th.halign-center, .reveal table td.halign-center {
  text-align: center
}

.reveal table th.valign-top, .reveal table td.valign-top {
  vertical-align: top
}

.reveal table th.valign-bottom, .reveal table td.valign-bottom {
  vertical-align: bottom
}

.reveal table th.valign-middle, .reveal table td.valign-middle {
  vertical-align: middle
}

table thead th, table tfoot th {
  font-weight: bold
}

tbody tr th {
  display: table-cell;
  line-height: 1.6
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
  font-weight: bold
}

thead {
  display: table-header-group
}

.reveal table.grid-none th, .reveal table.grid-none td {
  border-bottom: 0 !important
}

/* kbd macro */
kbd {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  display: inline-block;
  color: rgba(0, 0, 0, .8);
  font-size: .65em;
  line-height: 1.45;
  background: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
  margin: 0 .15em;
  padding: .2em .5em;
  vertical-align: middle;
  position: relative;
  top: -.1em;
  white-space: nowrap
}

.keyseq kbd:first-child {
  margin-left: 0
}

.keyseq kbd:last-child {
  margin-right: 0
}

/* callouts */
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background: rgba(0, 0, 0, .8);
  -webkit-border-radius: 50%;
  border-radius: 50%;
  text-align: center;
  font-size: .75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold
}

.conum[data-value] * {
  color: #fff !important
}

.conum[data-value] + b {
  display: none
}

.conum[data-value]:after {
  content: attr(data-value)
}

pre .conum[data-value] {
  position: relative;
  top: -.125em
}

b.conum * {
  color: inherit !important
}

.conum:not([data-value]):empty {
  display: none
}

/* Callout list */
.hdlist > table, .colist > table {
  border: 0;
  background: none
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
  background: none
}

td.hdlist1, td.hdlist2 {
  vertical-align: top;
  padding: 0 .625em
}

td.hdlist1 {
  font-weight: bold;
  padding-bottom: 1.25em
}

/* Disabled from Asciidoctor CSS because it caused callout list to go under the
 * source listing when .stretch is applied (see #335)
 * .literalblock+.colist,.listingblock+.colist{margin-top:-.5em} */
.colist td:not([class]):first-child {
  padding: .4em .75em 0;
  line-height: 1;
  vertical-align: top
}

.colist td:not([class]):first-child img {
  max-width: none
}

.colist td:not([class]):last-child {
  padding: .25em 0
}

/* Override Asciidoctor CSS that causes issues with reveal.js features */
.reveal .hljs table {
  border: 0
}

/* Callout list rows would have a bottom border with some reveal.js themes (see #335) */
.reveal .colist > table th, .reveal .colist > table td {
  border-bottom: 0
}

/* Fixes line height with Highlight.js source listing when linenums enabled (see #331) */
.reveal .hljs table thead tr th, .reveal .hljs table tfoot tr th, .reveal .hljs table tbody tr td, .reveal .hljs table tr td, .reveal .hljs table tfoot tr td {
  line-height: inherit
}

/* Columns layout */
.columns .slide-content {
  display: flex;
}

.columns.wrap .slide-content {
  flex-wrap: wrap;
}

.columns.is-vcentered .slide-content {
  align-items: center;
}

.columns .slide-content > .column {
  display: block;
  flex-basis: 0;
  flex-grow: 1;
  flex-shrink: 1;
}

.columns .slide-content > .column > * {
  padding: .75rem;
}

/* See #353 */
.columns.wrap .slide-content > .column {
  flex-basis: auto;
}

.columns .slide-content > .column.is-full {
  flex: none;
  width: 100%;
}

.columns .slide-content > .column.is-four-fifths {
  flex: none;
  width: 80%;
}

.columns .slide-content > .column.is-three-quarters {
  flex: none;
  width: 75%;
}

.columns .slide-content > .column.is-two-thirds {
  flex: none;
  width: 66.6666%;
}

.columns .slide-content > .column.is-three-fifths {
  flex: none;
  width: 60%;
}

.columns .slide-content > .column.is-half {
  flex: none;
  width: 50%;
}

.columns .slide-content > .column.is-two-fifths {
  flex: none;
  width: 40%;
}

.columns .slide-content > .column.is-one-third {
  flex: none;
  width: 33.3333%;
}

.columns .slide-content > .column.is-one-quarter {
  flex: none;
  width: 25%;
}

.columns .slide-content > .column.is-one-fifth {
  flex: none;
  width: 20%;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.text-left {
  text-align: left !important
}

.text-right {
  text-align: right !important
}

.text-center {
  text-align: center !important
}

.text-justify {
  text-align: justify !important
}

.footnotes {
  border-top: 1px solid rgba(0, 0, 0, 0.2);
  padding: 0.5em 0 0 0;
  font-size: 0.65em;
  margin-top: 4em;
}

.byline {
  font-size:.8em
}
ul.byline {
  list-style-type: none;
}
ul.byline li + li {
  margin-top: 0.25em;
}
</style></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title"><h1>Understanding Git</h1><p class="byline">
  <span class="author">Conor Restall <a href="mailto:conor@restall.io">conor@restall.io</a></span>
  </p></section><section><section id="_introduction"><h2>Introduction</h2><div class="slide-content"><div class="ulist"><ul><li><p>Ask questions as I go</p></li><li><p>If you are reading these slides press <code>S</code> to view my speaker notes.</p></li></ul></div><aside class="notes"><div class="paragraph"><p>Teaching principles - not tools
For demos I will solely use the command line. If that&#8217;s not what you&#8217;re used to don&#8217;t fret it&#8217;s not important to remember what I am typing, it&#8217;s important to remember the concepts I&#8217;m explaining.
There will be some parts where you see me poking around with Git internals.</p></div>
<div class="paragraph"><p>Not a talk about best practices or how you to use git.</p></div>
<div class="paragraph"><p>If I get time at I will progress on to breaking down some common and more complex git tasks.</p></div>
<div class="paragraph"><p>If I start going to fast please stop me.</p></div></aside></div></section><section><div class="slide-content"><div class="imageblock"><a class="image" href="https://xkcd.com/1597/"><img src="https://imgs.xkcd.com/comics/git.png" alt="git"></a></div>
<div class="paragraph"><p>Sound Familiar?</p></div></div></section><section id="_what_youre_hopefully_going_to_learn"><h2>What you&#8217;re (hopefully) going to learn</h2><div class="slide-content"><div class="ulist"><ul><li><p>Basic git data structures</p></li><li><p>What a commit is</p></li><li><p>What a branch is</p></li><li><p>What a merge is</p></li><li><p>What hashes represent</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Remembering a list of git commands is not good enough</p></div>
<div class="paragraph"><p>If you don&#8217;t understand the git principles the git documentation is useless (there is still lots of help out there though)</p></div>
<div class="paragraph"><p>Help to describe the basic principles of git so that you can apply these in the real world.
So that next time you have a problem in git you should be able to understand what went wrong, you should start to understand what certain commands do.</p></div></aside></div></section></section>
<section id="_fundementals"><h2>Fundementals</h2><div class="slide-content"><div class="ulist"><ul><li><p>DVCS</p></li><li><p>Hashes</p></li><li><p>.git directory</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Before I move on it&#8217;s important to understand these 3 things.</p></div>
<div class="paragraph"><p>Git is a DVCS this means that you store the entire repository locally. Git remotes are there purely to aid sharing code.</p></div>
<div class="paragraph"><p>Being distributed Git keeps a copy of the repository locally separate to your working copy.</p></div>
<div class="paragraph"><p>Git uses SHA-1 hashes to represent just about everything. Generally displayed as hex encoded.
<code>git hash-object somefile</code></p></div>
<div class="paragraph"><p>Something you&#8217;ll have probably already noticed if you used git for a while is that git sometimes uses short hashes to make things a bit easier.</p></div>
<div class="paragraph"><p><code>git log --oneline</code> will show history with short hash. <code>git log</code> will show history with full hash.
Git will give you enough bits of the hash to identifiy a unique object.</p></div>
<div class="paragraph"><p>I will come on to what hashes represent later.
Important to get your head around how the hashses work. If you ever change anything in git then the hash will be different, you&#8217;re not really modifying anything.
Likewise if you have the same hashed object twice it will only be stored once.
This is a bit of a lightbulb moment and other understanding stems from there.</p></div>
<div class="paragraph"><p>As I&#8217;m sure many of you have noticed there is a .git directory at the root of each git project.
The entire repo is stored inside here.
I will delve into this directory a bit, but don&#8217;t try to manually manipulate it&#8217;s contents unless you REALLY know what you&#8217;re doing.
If git is broken it&#8217;s not really very friendly.</p></div></aside></div></section>
<section><section id="_git_data_model"><h2>Git Data Model</h2><div class="slide-content"><div class="paragraph"><p>This is the structure that git uses to store commits.</p></div><div class="imageblock stretch"><img src="images/object-tree.png" alt="object tree" height="100%"></div><aside class="notes"><div class="paragraph"><p>Here we see the fundemental building blocks of everything stored in git.</p></div>
<div class="paragraph"><p>One way direction Commits Point to trees, trees point to others trees and blobs, blobs don&#8217;t point anywhere.
You can&#8217;t work you&#8217;re way back up without lots of searching.</p></div>
<div class="paragraph"><p>All parts are stored in the same way. So way to differentiate between the different types</p></div>
<div class="paragraph"><p>All parts are stored in .git/objects</p></div>
<div class="paragraph"><p>SideNote: if you run <code>git gc</code> or <code>git pack</code> then they may be stored slightly differently on disk to save space but the underlying principles are the same.</p></div>
<div class="paragraph"><p>Git is one big interlocked graph. You will hopefully start to see this as we go along.</p></div></aside></div></section><section id="_commits"><h2>Commits</h2><div class="slide-content"><div class="paragraph"><p>Represents a commit - Contain some meta data:</p></div>
<div class="ulist"><ul><li><p><strong>tree</strong>: pointer to a tree</p></li><li><p><strong>author</strong>: author details</p></li><li><p><strong>committer</strong>: similar to author (rarely different unless you want them to be)</p></li><li><p><strong>parent</strong>: pointer to a previous commit (initial commit is empty)</p></li><li><p><strong>commit message</strong>: Text that should describe the commit</p></li><li><p>occasionally some other meta data</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Tree - just a hash that points to the files in the commit - I&#8217;ll come on to trees on my next slide.</p></div>
<div class="paragraph"><p>Author - The person who wrote the code</p></div>
<div class="paragraph"><p>Committer - the person who commited the code. These are usually the same person. If you are applying someone else&#8217;s patch.
Most git tools don&#8217;t differentiate between commiter and author.</p></div>
<div class="paragraph"><p>Autor and committer fields are usually just also include an Epoch timestamp and timezone</p></div>
<div class="paragraph"><p>Parent - parent commit. It is possible to have multiple parents - e.g. Merges.
The first commit doesn&#8217;t have a parent</p></div>
<div class="paragraph"><p>Lets have a look at a commit.</p></div>
<div class="paragraph"><p><code>git init</code></p></div>
<div class="paragraph"><p><code>touch empty.txt</code></p></div>
<div class="paragraph"><p><code>git add empty.txt</code></p></div>
<div class="paragraph"><p><code>git commit -m 'initial commit - only an empty file'</code></p></div>
<div class="paragraph"><p>Now we have a commit in our git repo lets have a look at it.</p></div>
<div class="paragraph"><p>There is a useful tool to poking around with these internals that is included in git by default <code>git cat-file</code>.</p></div>
<div class="paragraph"><p>Before we can do that we need the hash of the commit <code>git rev-parse HEAD</code> will give us that</p></div>
<div class="paragraph"><p><code>git cat-file commit &lt;hash&gt;</code></p></div>
<div class="paragraph"><p>If we add another empty file and another commit</p></div>
<div class="paragraph"><p><code>touch empty2.txt</code></p></div>
<div class="paragraph"><p><code>git add empty2.txt</code></p></div>
<div class="paragraph"><p><code>git commit -m 'second commit - another empty file'</code></p></div>
<div class="paragraph"><p>and then look at the second commit we can see a parent</p></div>
<div class="paragraph"><p>Any questions about commits?</p></div></aside></div></section><section id="_trees"><h2>Trees</h2><div class="slide-content"><div class="paragraph"><p>Represent directories</p></div>
<div class="paragraph"><p>A tree must point at least 1 other tree or a blob</p></div>
<aside class="notes"><div class="paragraph"><p>Represents directory structure and some permissions</p></div>
<div class="paragraph"><p>each tree repesents a directory and contains a list of blobs (files) and trees (directories) both identified by their hash</p></div>
<div class="paragraph"><p>any change to the contents of a directory changes it&#8217;s hash</p></div>
<div class="paragraph"><p>Lets have a look at a real repo - using the one we already created</p></div>
<div class="paragraph"><p><code>git cat-file -p &lt;hash&gt;</code></p></div>
<div class="paragraph"><p>Gives us the hash of the tree</p></div>
<div class="paragraph"><p><code>git cat-file -p &lt;hash&gt;</code>
or
<code>git ls-tree &lt;hash&gt;</code></p></div>
<div class="paragraph"><p>We can see here our 2 files in the git repo - and their file permissions (it is possible to turn off file permissions)
You&#8217;ll notice that the 2 files have the exact same hash - this is becuase the files contain byte for byte the same file.</p></div>
<div class="paragraph"><p><code>ls-tree</code> gives us the root tree node. here we only have 2 files and no directories. Lets add a new directory with a file.</p></div>
<div class="paragraph"><p><code>mkdir dir1</code></p></div>
<div class="paragraph"><p><code>touch dir1/empty3.txt</code></p></div>
<div class="paragraph"><p><code>git add dir1/empty3.txt</code></p></div>
<div class="paragraph"><p><code>git commit -m 'third commit - a third empty file'</code></p></div>
<div class="paragraph"><p>get our new tree hash</p></div>
<div class="paragraph"><p><code>git cat-file commit $(git rev-parse HEAD)</code></p></div>
<div class="paragraph"><p>Now we can see our new directory which is of type tree. For completeness we can have a look inside this directory and see the other file we created.</p></div>
<div class="paragraph"><p><code>git ls-tree &lt;HASH&gt;</code></p></div></aside></div></section><section id="_blobs"><h2>Blobs</h2><div class="slide-content"><div class="ulist"><ul><li><p>Represent Files</p></li><li><p>Tracking starts once you run <code>git add</code></p></li><li><p>Stored in <code>.git/objects/</code> (along with commits and trees)</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Lets look at one of our files. Firstly lets get the hash of the files</p></div>
<div class="paragraph"><p><code>git ls-tree &lt;TREE-HASH&gt;</code></p></div>
<div class="paragraph"><p>Now we can re-use cat-file to view the contents</p></div>
<div class="paragraph"><p><code>git cat-file blob &lt;BLOB-HASH&gt;</code></p></div>
<div class="paragraph"><p>As expected the file is empty.</p></div>
<div class="paragraph"><p>Lets add some content to a file</p></div>
<div class="paragraph"><p><code>echo 'some file content' &gt; notEmpty.txt</code></p></div>
<div class="paragraph"><p>Lets watch git and see how it changes as we add this file and commit it.</p></div>
<div class="paragraph"><p>Firstly lets look to see that the file isn&#8217;t already tracked by git. We can calculate the hash of the file and see that it&#8217;s not alredy in git.</p></div>
<div class="paragraph"><p><code>git hash-object notEmpty.txt</code></p></div>
<div class="paragraph"><p><code>ls .git/objects/</code></p></div>
<div class="paragraph"><p>All commits, trees and blobs are all stored in <code>.git/objects/</code></p></div>
<div class="paragraph"><p>Now we can add it to git and see what happens</p></div>
<div class="paragraph"><p><code>git add notEmpty.txt</code></p></div>
<div class="paragraph"><p><code>ls .git/objects/c2/e7a8d366fd124ec77d39d3ae8a4904d8c1ad3d</code></p></div>
<div class="paragraph"><p>We can see that git has started tracking the file</p></div>
<div class="paragraph"><p>At this point it&#8217;s not in a tree though. It will be referenced in the .git/index.</p></div>
<div class="paragraph"><p>This object has been compressed using zlib so we can&#8217;t just look directly at the object</p></div>
<div class="paragraph"><p>Lets commit this new file and see that it&#8217;s made it into the tree and a new commit is created.</p></div>
<div class="paragraph"><p><code>git commit -m 'our first non-empty file'</code></p></div>
<div class="paragraph"><p><code>git rev-parse HEAD</code> - to get the latest commit</p></div>
<div class="paragraph"><p><code>git cat-file commit &lt;HASH&gt;</code></p></div>
<div class="paragraph"><p><code>git ls-tree &lt;HASH&gt;</code></p></div>
<div class="paragraph"><p>More on what happens when we commit a little later on</p></div>
<div class="paragraph"><p>Questions?</p></div></aside></div></section><section id="_what_does_this_all_mean_for_git"><h2>What does this all mean for git</h2><div class="slide-content"><div class="ulist"><ul><li><p>Every time you make a change to a file then a new copy of the file is stored in git.</p><div class="ulist"><ul><li><p>This is why git isn&#8217;t very good at storing large files. Changing 1 byte results in a duplicate file</p></li></ul></div></li><li><p>Each commit can directly access it&#8217;s the exact state without having to look through all of history</p></li><li><p>If you commit the same file it will only be stored once</p></li><li><p>There is nothing special about moving or renaming files</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Much of this is actually pretty transparent when you&#8217;re using due to gits good merge tooling.</p></div>
<div class="paragraph"><p>Questions?</p></div></aside></div></section></section>
<section><section id="_branches_and_tags"><h2>Branches and Tags</h2><div class="slide-content"><div class="ulist"><ul><li><p>Branches are Tags are both <code>refs</code>.</p></li><li><p>They are pointers to a commit</p></li><li><p>By convention tags don&#8217;t change, branches do</p></li></ul></div><aside class="notes"><div class="paragraph"><p>We can see call branches in
<code>ls .git/refs/heads</code></p></div>
<div class="paragraph"><p>We can view all tags in
<code>ls .git/refs/tags</code></p></div>
<div class="paragraph"><p>Refs as a simple as you can get. They are just a text file with the commit hash in.</p></div>
<div class="paragraph"><p><code>cat 'cat .git/refs/master'</code> matches <code>git rev-parse HEAD</code></p></div>
<div class="paragraph"><p>At this point we can start to see that everything in git is stored in this connected data structure. Lots of reuse.</p></div>
<div class="paragraph"><p>Questions?</p></div></aside></div></section><section id="_annotated_tags"><h2>Annotated Tags</h2><div class="slide-content"><div class="ulist"><ul><li><p>Special type of tags that contain more information</p></li><li><p>Possible to tag any object (commit, tree, blob or even annotated tag)</p></li><li><p>Create an additional object</p></li><li><p>Point the tag ref at the new object</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Annotated tags provide a mechanism to store additional information about a tag.</p></div>
<div class="paragraph"><p>This is achieved by creating a tag object it has with target object hash, target object type, tag name, the name of the person ("tagger") who created the tag, a message and possibly taggers signature.</p></div></aside></div></section><section id="_summary_so_far"><h2>Summary so far</h2><div class="slide-content"><div class="ulist"><ul><li><p>Refs point at commits</p></li><li><p>Commits point at other commits and a tree</p></li><li><p>Trees point at blobs</p></li><li><p>Blobs are just zipped files</p></li></ul></div>
<div class="paragraph"><p>QUESTIONS?</p></div>
<aside class="notes"><div class="paragraph"><p>Important to understand these are all intertwined, but not cyclical.</p></div>
<div class="paragraph"><p>The structure is a "directed acyclic graph"</p></div></aside></div></section></section>
<section><section id="_merging"><h2>Merging</h2><div class="slide-content"><div class="paragraph"><p>2 Options for merging:</p></div><div class="ulist"><ul><li><p>Fast-forward merge</p></li><li><p>Merge Commit</p></li></ul></div><aside class="notes"><div class="paragraph"><p>By default when you merge the first thing git does is figure out if you can do a fast-forward merge.</p></div></aside></div></section><section id="_fast_forwarding"><h2>Fast-forwarding</h2><div class="slide-content"><div class="imageblock"><img src="http://www.kdgregory.com/images/blog/git-merge-ff.png" alt="git merge ff"></div>
<aside class="notes"><div class="paragraph"><p>A fast-forward merge is when the 2 branches have a shared history and the new commits can be added straight to the branch.</p></div>
<div class="paragraph"><p>Nothing is actually moved or copied the branch is just changed to point at the new HEAD commit.</p></div>
<div class="paragraph"><p>You can force the type of merge using <code>--no-ff</code> when merging or globally using <code>git config --global merge.ff false</code>.</p></div>
<div class="paragraph"><p>This is sometimes desirable if you want to keep a strict history of when things were branched and merged</p></div></aside></div></section><section id="_merge_commits"><h2>Merge commits</h2><div class="slide-content"><div class="imageblock"><img src="images/git-diagrams-3.png" alt="git diagrams 3"></div></div></section><section><div class="slide-content"><div class="paragraph"><p>Merge commits are commits with 2 or more parents</p></div>
<div class="paragraph"><p>There are a lots or Merge Strategies and each has lots of options</p></div>
<div class="ulist"><ul><li><p>Resolve</p></li><li><p>Recursive (default)</p></li><li><p>Octopus (default if you merge more than 2 branches)</p></li><li><p>Ours</p></li><li><p>Subtree</p></li></ul></div>
<div class="paragraph"><p>See <a href="https://git-scm.com/docs/merge-strategies" class="bare">https://git-scm.com/docs/merge-strategies</a> for more info</p></div>
<aside class="notes"><div class="paragraph"><p><a href="https://git-scm.com/docs/merge-strategies" class="bare">https://git-scm.com/docs/merge-strategies</a>
If a branch cannot be fast-forwarded then a Merge commit will be created.</p></div>
<div class="paragraph"><p><strong>Resolve</strong> This can only resolve two heads (i.e. the current branch and another branch you pulled from) using a 3-way merge algorithm. It tries to carefully detect criss-cross merge ambiguities and is considered generally safe and fast.</p></div>
<div class="paragraph"><p><strong>Recursive</strong> This can only resolve two heads using a 3-way merge algorithm. Additionally this can detect and handle merges involving renames. This is the default merge strategy when pulling or merging one branch.</p></div>
<div class="paragraph"><p><strong>Octopus</strong> This resolves cases with more than two heads, but refuses to do a complex merge that needs manual resolution.</p></div>
<div class="paragraph"><p><strong>Ours</strong> Ignore all other changes. Even changes to untouched files and new files.</p></div>
<div class="paragraph"><p><strong>Subtree</strong> This is a modified recursive strategy. When merging trees A and B, if B corresponds to a subtree of A (actual files), B is first adjusted to match the tree structure of A, instead of reading the trees at the same level. This adjustment is also done to the common ancestor tree.</p></div>
<div class="paragraph"><p>What happens if one of these merege strategies come across something that can&#8217;t be automatically merged.</p></div></aside></div></section><section id="_merge_conflict" data-background-image="images/ahh.gif" data-background-size="cover"><h2>MERGE CONFLICT</h2></section><section id="_merge_conflict_2"><h2>Merge Conflict</h2><div class="slide-content"><div class="ulist"><ul><li><p>Occurs when the merge strategy can&#8217;t figure out what the new file will look like.</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Conflicts sometimes happen because of genuine collisions e.g. a method is refactored in different ways on the 2 branches.
Sometimes they are because the merge stategy doesn&#8217;t understand what is going on. E.G. 2 new method are added to a class in the same place.</p></div>
<div class="paragraph"><p>Lets have a look at what is going on when we get a conflict.</p></div>
<div class="paragraph"><p>Create a branch and make a change</p></div>
<div class="paragraph"><p><code>git checkout -b branchb</code></p></div>
<div class="paragraph"><p><code>vim notEmpty.txt</code></p></div>
<div class="paragraph"><p><code>git commit -am 'change contents of notEmpty'</code></p></div>
<div class="paragraph"><p>Switch back to master and create a conflicting change</p></div>
<div class="paragraph"><p><code>git checkout master</code></p></div>
<div class="paragraph"><p><code>vim notEmpty.txt</code></p></div>
<div class="paragraph"><p><code>git commit -am 'make a colliding change to notEmpty'</code></p></div>
<div class="paragraph"><p>Now when we merge we get into a merge conflict state</p></div>
<div class="paragraph"><p><code>git merge branchb</code></p></div>
<div class="paragraph"><p><code>git status</code></p></div>
<div class="paragraph"><p>lets us know we&#8217;re in a conflict state. We can also look at the contents of <code>.git/</code>
we can see some new files. There are 2 files that point to the original branch and the branch we tried to merge in and a file called MERGE_MODE that lets us know we are mid merge.</p></div>
<div class="paragraph"><p>This is what I want to impress onto you. The current state of the git repo is represented by a few text files in this repo. Nothing special or magic. You don&#8217;t have to know what these files are exactly or precisely how the affect git to understand the simplicity of it.</p></div>
<div class="paragraph"><p>Lets quickly fix this and commit</p></div>
<div class="paragraph"><p><code>vim notEmpty.txt</code></p></div>
<div class="paragraph"><p><code>git add notEmpty.txt</code></p></div>
<div class="paragraph"><p>When we commit we can see that git has generated us a message explaining the merge.</p></div>
<div class="paragraph"><p><code>git commit</code></p></div>
<div class="paragraph"><p>We can also go back an look at this merge commit and see it&#8217;s 2 parent commits.</p></div>
<div class="paragraph"><p><code>git cat-file commit $(git rev-parse HEAD)</code></p></div></aside></div></section></section>
<section><section id="_config_files"><h2>Config files</h2><div class="slide-content"><div class="paragraph"><p>Global config <code>~/.gitconfig</code></p></div><div class="paragraph"><p>Repo config <code>.git/config</code></p></div></div></section><section id="_setting_config"><h2>Setting Config</h2><div class="slide-content"><div class="paragraph"><p><code>git config user.email <a href="mailto:conor@restall.io">conor@restall.io</a></code></p></div>
<div class="paragraph"><p><code>git config --global init.defaultBranch main</code></p></div>
<div class="paragraph"><p><code>git config --global core.excludesFile ~/.gitignore</code></p></div></div></section><section id="_getting_config"><h2>Getting Config</h2><div class="slide-content"><div class="paragraph"><p><code>git config user.email</code></p></div>
<div class="paragraph"><p><code>git config --global init.defaultBranch</code></p></div></div></section></section>
<section id="_viewing_branches"><h2>Viewing Branches</h2><div class="slide-content"><div class="ulist"><ul><li><p><code>git log</code></p></li><li><p><code>git log --graph --oneline</code>?</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>I know I said this isn&#8217;t a talk on best practices and how to use git but here is the exception because <code>cat-file</code> is of course a crazy way to look at history and I don&#8217;t want to see people manually crawling through commits. Here are some better tools.</p></div>
<div class="paragraph"><p><code>git log</code> presents a linear history of commits. Add <code>--oneline</code> to see a simpler view of history. Displays a flattened graph.</p></div>
<div class="paragraph"><p><code>git log --graph</code> displays branches, much easier to see what commits were made near to each others.</p></div>
<div class="paragraph"><p>I&#8217;m sure whatever tool you decide to use for git also displays this information in some form or other.</p></div></aside></div></section>
<section><section id="_rebasing"><h2>Rebasing</h2><div class="slide-content"><div class="ulist"><ul><li><p>Controversial</p></li><li><p>Rewriting history</p></li></ul></div><aside class="notes"><div class="paragraph"><p>Some people swear by always rebasing, Others swear by never rebasing even to go as far as forcing merges when they can fast forward. Personally I dislike rebasing.</p></div>
<div class="paragraph"><p>Clean history vs actual history</p></div>
<div class="paragraph"><p>Rebasing is about replaying changes from a different base.</p></div></aside></div></section><section><div class="slide-content"><div class="imageblock"><img src="images/git-diagrams-1.png" alt="git diagrams 1"></div>
<div class="imageblock"><img src="images/git-diagrams-2.png" alt="git diagrams 2"></div>
<aside class="notes"><div class="paragraph"><p>Example:</p></div>
<div class="paragraph"><p>We have a branch coming off our master.</p></div>
<div class="paragraph"><p>Now we want to bring these changes back onto master but we want a linear history (for whatever reason) alternatively it&#8217;s a way to resolve conflicts.</p></div>
<div class="paragraph"><p>If a base commit isn&#8217;t specified. Then git will try to work out where the branch deviated from the target branch.</p></div>
<div class="paragraph"><p>Changing history isn&#8217;t as simple as it might seem. Don&#8217;t forget commits contain entire files so you can&#8217;t just point your current commit at a new base.</p></div>
<div class="paragraph"><p>Git will go to the original commits, calculate the diff of what changed and then replay the diff of each commit on top of the new base.
If a conflict is hit the rebase pauses and you&#8217;ll have to manually solve the conflict.</p></div>
<div class="paragraph"><p>Change the current branch to point at this new commit.</p></div>
<div class="paragraph"><p>It&#8217;s important to be aware that the old commits aren&#8217;t deleted, they just aren&#8217;t in the current commit history.</p></div>
<div class="paragraph"><p>We can then fast-forward these new commits into the original branch. I.E. Update master branch to point at the new head commit.</p></div>
<div class="paragraph"><p>I&#8217;m not going to go into interactive rebasing. But I&#8217;ll say that it allows you to "change" what was commited.</p></div></aside></div></section></section>
<section><section id="_working_locally"><h2>Working locally</h2><div class="slide-content"><div class="ulist"><ul><li><p>reset --soft</p></li><li><p>reset (--mixed)</p></li><li><p>reset --hard</p></li></ul></div><aside class="notes"><div class="paragraph"><p>soft changes repository only
mixed changes the repository and staging area
hard changes working directory</p></div></aside></div></section><section id="_working_tree"><h2>Working Tree</h2></section><section id="_staging"><h2>Staging</h2><div class="slide-content"><div class="paragraph"><p><code>git add &#8230;&#8203;</code></p></div></div></section><section id="_partial_adding"><h2>Partial adding</h2><div class="slide-content"><div class="paragraph"><p><code>git add . -p</code></p></div></div></section><section id="_local_area"><h2>Local Area</h2></section></section>
<section id="_didnt_talk_about"><h2>Didn&#8217;t talk about</h2><div class="slide-content"><div class="ulist"><ul><li><p>Contents of <code>.git</code> directory</p></li><li><p>Remotes incl. Pushing and Pulling</p></li><li><p>Interactive rebasing &amp; rewriting history</p></li><li><p>Hooks</p></li><li><p>HEAD detached head</p></li><li><p>Signing commits</p></li><li><p>Commit config &amp; mid commit status</p></li><li><p>Fetch vs Pull vs Switch vs Checkout</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>There is of course lots more to know about git, Hopefully I have given you enough of an understanding</p></div>
<div class="paragraph"><p>Remotes - wanted to include these but ultimately I ran out of time
Interactive Rebasing - Wanted to avoid teaching tools</p></div></aside></div></section>
<section id="_more_resources"><h2>More Resources</h2><div class="slide-content"><div class="ulist"><ul><li><p><a href="https://git-scm.com/docs/" class="bare">https://git-scm.com/docs/</a> - Reference Docs</p></li><li><p><a href="https://git-scm.com/book/en/v2/" class="bare">https://git-scm.com/book/en/v2/</a> - Book called "Pro Git" by Scott Chacon and Ben Straub</p></li><li><p><a href="http://gitimmersion.com" class="bare">http://gitimmersion.com</a> - really good resource for learning git</p></li><li><p>Google</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>The book is really good and is available for free under Creative Commons License</p></div>
<div class="paragraph"><p>Or Print versions are available</p></div>
<div class="paragraph"><p>Git is really popular and quite complicated. This has lead to loads of really good online git resources being created.</p></div>
<div class="paragraph"><p>I know lots of devs learn best by doing. <a href="http://gitimmersion.com" class="bare">http://gitimmersion.com</a> is a very hands on and simple learning tool.</p></div>
<div class="paragraph"><p>Hopefully I&#8217;ve given yo enough knowledge that you know what to search for.</p></div></aside></div></section>
<section id="_thanks"><h2>Thanks</h2><div class="slide-content"><aside class="notes"><div class="paragraph"><p>Thanks for coming and listening.</p></div>
<div class="paragraph"><p>I hope it was helpful.</p></div>
<div class="paragraph"><p>I will share out slides later today</p></div>
<div class="paragraph"><p>If you have any git questions feel free to ask me at any point</p></div>
<div class="paragraph"><p>All feedback is much appreciated</p></div></aside></div></section></div></div><script src="node_modules/reveal.js/dist/reveal.js"></script><script>Array.prototype.slice.call(document.querySelectorAll('.slides section')).forEach(function(slide) {
  if (slide.getAttribute('data-background-color')) return;
  // user needs to explicitly say he wants CSS color to override otherwise we might break custom css or theme (#226)
  if (!(slide.classList.contains('canvas') || slide.classList.contains('background'))) return;
  var bgColor = getComputedStyle(slide).backgroundColor;
  if (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
    slide.setAttribute('data-background-color', bgColor);
    slide.style.backgroundColor = 'transparent';
  }
});

// More info about config & dependencies:
// - https://github.com/hakimel/reveal.js#configuration
// - https://github.com/hakimel/reveal.js#dependencies
Reveal.initialize({
  // Display presentation control arrows
  controls: true,
  // Help the user learn the controls by providing hints, for example by
  // bouncing the down arrow when they first encounter a vertical slide
  controlsTutorial: true,
  // Determines where controls appear, "edges" or "bottom-right"
  controlsLayout: 'bottom-right',
  // Visibility rule for backwards navigation arrows; "faded", "hidden"
  // or "visible"
  controlsBackArrows: 'faded',
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: 'true',
  // Control which views the slide number displays on
  showSlideNumber: 'all',
  // Add the current slide number to the URL hash so that reloading the
  // page/copying the URL will return you to the same slide
  hash: false,
  // Push each slide change to the browser history. Implies `hash: true`
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Disables the default reveal.js slide layout so that you can use custom CSS layout
  disableLayout: false,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // See https://github.com/hakimel/reveal.js/#navigation-mode
  navigationMode: 'default',
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags whether to include the current fragment in the URL,
  // so that reloading brings you to the same fragment position
  fragmentInURL: false,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Global override for preloading lazy-loaded iframes
  // - null: Iframes with data-src AND data-preload will be loaded when within
  //   the viewDistance, iframes with only data-src will be loaded when visible
  // - true: All iframes with data-src will be loaded when within the viewDistance
  // - false: All iframes with data-src will be loaded only when visible
  preloadIframes: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Use this method for navigation when auto-sliding
  autoSlideMethod: Reveal.navigateNext,
  // Specify the average time in seconds that you think you will spend
  // presenting each slide. This is used to show a pacing timer in the
  // speaker view
  defaultTiming: 120,
  // Specify the total time in seconds that is available to
  // present.  If this is set to a nonzero value, the pacing
  // timer will work out the time available for each slide,
  // instead of using the defaultTiming value
  totalTime: 0,
  // Specify the minimum amount of time you want to allot to
  // each slide, if using the totalTime calculation method.  If
  // the automated time allocation causes slide pacing to fall
  // below this threshold, then you will see an alert in the
  // speaker notes window
  minimumTimePerSlide: 0,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hide cursor if inactive
  hideInactiveCursor: true,
  // Time before the cursor is hidden (in ms)
  hideCursorTime: 5000,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  // Add `data-preview-link` and `data-preview-link="false"` to customise each link
  // individually
  previewLinks: false,
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: 'linear',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Number of slides away from the current that are visible on mobile
  // devices. It is advisable to set this to a lower number than
  // viewDistance in order to save resources.
  mobileViewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Number of pixels to move the parallax background per slide
  // - Calculated automatically unless specified
  // - Set to 0 to disable movement along an axis
  parallaxBackgroundHorizontal: null,
  parallaxBackgroundVertical: null,
  // The display mode that will be used to show slides
  display: 'block',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // PDF Export Options
  // Put each fragment on a separate page
  pdfSeparateFragments: true,
  // For slides that do not fit on a page, max number of pages
  pdfMaxPagesPerSlide: 1,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'node_modules/reveal.js/plugin/zoom/zoom.js', async: true, callback: function () { Reveal.registerPlugin(RevealZoom) } },
      { src: 'node_modules/reveal.js/plugin/notes/notes.js', async: true, callback: function () { Reveal.registerPlugin(RevealNotes) } }
  ],
});</script><script>var dom = {};
dom.slides = document.querySelector('.reveal .slides');

function getRemainingHeight(element, slideElement, height) {
  height = height || 0;
  if (element) {
    var newHeight, oldHeight = element.style.height;
    // Change the .stretch element height to 0 in order find the height of all
    // the other elements
    element.style.height = '0px';
    // In Overview mode, the parent (.slide) height is set of 700px.
    // Restore it temporarily to its natural height.
    slideElement.style.height = 'auto';
    newHeight = height - slideElement.offsetHeight;
    // Restore the old height, just in case
    element.style.height = oldHeight + 'px';
    // Clear the parent (.slide) height. .removeProperty works in IE9+
    slideElement.style.removeProperty('height');
    return newHeight;
  }
  return height;
}

function layoutSlideContents(width, height) {
  // Handle sizing of elements with the 'stretch' class
  toArray(dom.slides.querySelectorAll('section .stretch')).forEach(function (element) {
    // Determine how much vertical space we can use
    var limit = 5; // hard limit
    var parent = element.parentNode;
    while (parent.nodeName !== 'SECTION' && limit > 0) {
      parent = parent.parentNode;
      limit--;
    }
    if (limit === 0) {
      // unable to find parent, aborting!
      return;
    }
    var remainingHeight = getRemainingHeight(element, parent, height);
    // Consider the aspect ratio of media elements
    if (/(img|video)/gi.test(element.nodeName)) {
      var nw = element.naturalWidth || element.videoWidth, nh = element.naturalHeight || element.videoHeight;
      var es = Math.min(width / nw, remainingHeight / nh);
      element.style.width = (nw * es) + 'px';
      element.style.height = (nh * es) + 'px';
    } else {
      element.style.width = width + 'px';
      element.style.height = remainingHeight + 'px';
    }
  });
}

function toArray(o) {
  return Array.prototype.slice.call(o);
}

Reveal.addEventListener('slidechanged', function () {
  layoutSlideContents(960, 700)
});
Reveal.addEventListener('ready', function () {
  layoutSlideContents(960, 700)
});
Reveal.addEventListener('resize', function () {
  layoutSlideContents(960, 700)
});</script></body></html>